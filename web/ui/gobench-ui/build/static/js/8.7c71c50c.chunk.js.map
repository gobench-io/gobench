{"version":3,"sources":["utils/status.js","pages/application/dashboard.js","pages/application/scenario.js","pages/application/detail.js"],"names":["statusColors","running","init","finished","cancel","pending","provisioning","error","info","formatTag","str","length","split","map","text","index","color","colorFull","colors","Group","lazy","withRouter","connect","application","dispatch","detail","groups","useState","fetching","setFetching","id","useParams","status","useEffect","type","payload","interval","setInterval","INTERVAL","clearInterval","className","Helmet","title","isArray","group","key","fallback","expandDefault","value","get","highlight","code","languages","go","padding","tabSize","insertSpaces","disabled","style","fontFamily","fontSize","orientation","plain","UserLog","SystemLog","Tags","TabPane","Tabs","tab","setTab","history","useHistory","name","created","created_at","startedAt","started_at","finishedAt","updated_at","start","moment","utc","end","includes","diff","duration","format","toUpperCase","float","marginLeft","onClick","data","onConfirm","okText","cancelText","danger","redirect","destroy","backgroundColor","push","defaultActiveKey","size","onChange"],"mappings":"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","file":"static/js/8.7c71c50c.chunk.js","sourcesContent":["export const statusColors = {\n  running: '#73d13d',\n  init: '#ffcc00',\n  finished: '#1890ff',\n  cancel: '#bfbfbf',\n  pending: '#faad14',\n  provisioning: '#00bcd4',\n  error: '#f5222d',\n  info: 'default'\n}\nexport const formatTag = (str) => {\n  if (!str || str.length === 0) {\n    return []\n  }\n  const tags = str.split(',').map((text, index) => ({\n    color: colorFull(index),\n    index,\n    text\n  }))\n  return tags\n}\nexport const colorFull = (index) => {\n  const colors = [\n    '#ff4d4f',\n    '#cf1322',\n    '#a8071a',\n    '#fa541c',\n    '#ff7a45',\n    '#ad2102',\n    '#ffa940',\n    '#fa8c16',\n    '#ad4e00',\n    '#ffc53d',\n    '#faad14',\n    '#d48806',\n    '#d4b106',\n    '#d3f261',\n    '#bae637',\n    '#a0d911',\n    '#7cb305',\n    '#5b8c00',\n    '#73d13d',\n    '#52c41a',\n    '#389e0d',\n    '#237804',\n    '#135200',\n    '#5cdbd3',\n    '#13c2c2',\n    '#1890ff',\n    '#597ef7',\n    '#b37feb',\n    '#ff85c0',\n    '#722ed1',\n    '#eb2f96',\n    '#595959'\n  ]\n  if (!index) {\n    return colors[0]\n  }\n\n  if (index >= colors.length) {\n    index = index % colors.length\n  }\n\n  return colors[index]\n}\n","import React, { useEffect, useState, lazy, Suspense } from 'react'\nimport { Helmet } from 'react-helmet'\nimport { connect } from 'react-redux'\nimport { withRouter, useParams } from 'react-router-dom'\nimport { isArray } from 'lodash'\nimport { INTERVAL } from 'constant'\n\nconst Group = lazy(() => import('./chart/group'))\nconst loading = () => <p>Loading group...</p>\n\nconst mapStateToProps = ({ application, dispatch }) => ({ detail: application.detail, groups: application.groups, dispatch })\n\nconst DefaultPage = ({ detail, groups, dispatch }) => {\n  const [fetching, setFetching] = useState(false)\n  const { id } = useParams()\n  const { status } = detail\n\n  useEffect(() => {\n    if (!fetching && id) {\n      dispatch({\n        type: 'application/GROUPS',\n        payload: { id }\n      })\n      setFetching(true)\n    }\n  }, [groups, id])\n  useEffect(() => {\n    if (status === 'running' && groups.length === 0) {\n      const interval = setInterval(() => {\n        dispatch({\n          type: 'application/GROUPS',\n          payload: { id }\n        })\n      }, INTERVAL / 3)\n      // destroy interval on unmount\n      return () => clearInterval(interval)\n    }\n  })\n  return (\n    <>\n      <div className='application-dashboard'>\n        <Helmet title='Application| Dashboard' />\n        {(isArray(groups) && groups.length > 0) &&\n      groups.map((group, index) => {\n        return (\n          <Suspense key={group.id || index} fallback={loading()}>\n            <Group group={group} expandDefault={index === 0} />\n          </Suspense>\n        )\n      })}\n      </div>\n    </>\n  )\n}\n\nexport default withRouter(connect(mapStateToProps)(DefaultPage))\n","import React, { } from 'react'\nimport { Helmet } from 'react-helmet'\nimport { connect } from 'react-redux'\nimport { withRouter } from 'react-router-dom'\nimport { get } from 'lodash'\nimport { Divider } from 'antd'\nimport Editor from 'react-simple-code-editor'\nimport { highlight, languages } from 'prismjs/components/prism-core'\nimport 'prismjs/components/prism-clike'\nimport 'prismjs/components/prism-go'\nimport 'css/editor.css'\n\nconst mapStateToProps = ({ application, dispatch }) => ({ detail: application.detail, groups: application.groups, dispatch })\n\nconst DefaultPage = ({ detail }) => {\n  return (\n    <>\n      <div className='application-scenario'>\n        <Helmet title='Application| scenario' />\n        <h5>Scenario</h5>\n        <div>\n          <div className='application-scenario editor-container'>\n            <Editor\n              value={get(detail, 'scenario', '')}\n              highlight={code => highlight(code, languages.go, 'go')}\n              padding={16}\n              tabSize={4}\n              insertSpaces\n              className='editor'\n              disabled\n              style={{\n                fontFamily: '\"Arial\", \"Open Sans\", monospace',\n                fontSize: 14\n              }}\n            />\n          </div>\n          <Divider orientation='left' plain>\n     gomod\n          </Divider>\n          <div className='application-scenario editor-container'>\n            <Editor\n              value={get(detail, 'gomod', '')}\n              highlight={code => highlight(code, languages.go, 'go')}\n              padding={16}\n              tabSize={4}\n              insertSpaces\n              className='editor'\n              disabled\n              style={{\n                fontFamily: '\"Arial\", \"Open Sans\", monospace',\n                fontSize: 14\n              }}\n            />\n          </div>\n          <Divider orientation='left' plain>\n     gosum\n          </Divider>\n          <div className='application-scenario editor-container'>\n            <Editor\n              value={get(detail, 'gosum', '')}\n              highlight={code => highlight(code, languages.go, 'go')}\n              padding={16}\n              tabSize={4}\n              insertSpaces\n              className='editor'\n              disabled\n              style={{\n                fontFamily: '\"Arial\", \"Open Sans\", monospace',\n                fontSize: 14\n              }}\n            />\n          </div>\n        </div>\n      </div>\n    </>\n  )\n}\n\nexport default withRouter(connect(mapStateToProps)(DefaultPage))\n","import React, { useState, useEffect, lazy } from 'react'\nimport { Helmet } from 'react-helmet'\nimport { Tabs, Tag, Button, Popconfirm } from 'antd'\nimport { connect } from 'react-redux'\nimport { withRouter, useParams, useHistory } from 'react-router-dom'\nimport Dashboard from './dashboard'\nimport Scenario from './scenario'\nimport { statusColors } from 'utils/status'\nimport { INTERVAL } from 'constant'\nimport moment from 'moment'\nimport 'css/index.css'\nimport './style.scss'\n\nconst UserLog = lazy(() => import('./user-log'))\nconst SystemLog = lazy(() => import('./system-log'))\nconst Tags = lazy(() => import('./tags'))\nconst { TabPane } = Tabs\n\nconst mapStateToProps = ({ application, dispatch }) => {\n  const { detail } = application\n  return { detail, dispatch }\n}\nconst DefaultPage = ({ detail, dispatch }) => {\n  const [fetching, setFetching] = useState(false)\n  const [tab, setTab] = useState('1')\n  const history = useHistory()\n  const { id } = useParams()\n  const { name, created_at: created, status, started_at: startedAt, updated_at: finishedAt } = detail\n  const start = moment(startedAt).utc()\n  let end = moment(finishedAt).utc()\n  if (status === 'running') {\n    end = moment.utc()\n  }\n  if (['pending', 'error', 'provisioning'].includes(status)) {\n    end = start\n  }\n  const diff = startedAt ? end.diff(start) : 0\n  // execution\n  const duration = moment.utc(diff).format('HH:mm:ss.SSS')\n  useEffect(() => {\n    if (!fetching) {\n      dispatch({\n        type: 'application/DETAIL',\n        payload: { id }\n      })\n      setFetching(true)\n    }\n  }, [detail])\n  useEffect(() => {\n    if (['pending', 'provisioning'].includes(status)) {\n      const interval = setInterval(() => {\n        dispatch({\n          type: 'application/DETAIL',\n          payload: { id }\n        })\n      }, INTERVAL / 3)\n      // destroy interval on unmount\n      return () => clearInterval(interval)\n    }\n  })\n  const clone = (data) => {\n    dispatch({\n      type: 'application/CLONE',\n      payload: { data }\n    })\n  }\n  const cancel = (id) => {\n    dispatch({\n      type: 'application/CANCEL',\n      payload: { id }\n    })\n  }\n  const destroy = (id) => {\n    dispatch({\n      type: 'application/DELETE',\n      payload: { id, redirect: '/' }\n    })\n  }\n  const onChange = (value) => {\n    setTab(value)\n  }\n  return (\n    <>\n      <div className='application-detail'>\n        <Helmet title='Application|Detail' />\n        <div className='card'>\n          <div className='card-header'>\n            <div className='row'>\n              <div className='col-md-6'>\n                <div className='cui__utils__heading mb-0'>\n                  <h2>{name}</h2>\n                  <Tag color={statusColors[status]}>\n                    {(status || '').toUpperCase()}\n                  </Tag>\n                </div>\n                <div className='text-muted'>Created: <strong>{moment(created).utc().format()} UTC</strong></div>\n                <div className='text-muted'>Started: <strong>{start.format()} UTC</strong></div>\n                <div className='text-muted'>Ended: <strong>{['pending', 'error', 'provisioning', 'running'].includes(status) ? <i>not finish yet</i> : `${end.format()} UTC`}</strong></div>\n                <div className='text-muted'>Duration: <strong>{duration}</strong></div>\n              </div>\n              <div className='col-md-6'>\n                <div className='text-right'>\n                  <div style={{ float: 'right' }} key={detail.id}>\n                    <Button\n                      style={{ marginLeft: 5 }}\n                      type='default'\n                      onClick={() => clone(detail)}\n                    >\n              Clone\n                    </Button>\n                    {['running', 'pending'].includes(detail.status) && (\n                      <Popconfirm\n                        title={`Are you sure cancel application ${detail.name}?`}\n                        onConfirm={() => cancel(detail.id)}\n                        okText='Yes'\n                        cancelText='No'\n                      >\n                        <Button\n                          type='dashed'\n                          style={{ marginLeft: 5 }}\n                          danger\n                        >\n                  Cancel\n                        </Button>\n                      </Popconfirm>\n                    )}\n                    {['finished', 'pending', 'error', 'cancel'].includes(detail.status) && (\n                      <Popconfirm\n                        title={`Are you sure delete application ${detail.name}?`}\n                        onConfirm={() => destroy(detail.id)}\n                        okText='Yes'\n                        cancelText='No'\n                      >\n                        <Button\n                          type='primary'\n                          className='delete-button'\n                          style={{ marginLeft: 5, color: 'white', backgroundColor: '#f5222d!important' }}\n                          danger\n                        >\n                  Delete\n                        </Button>\n                      </Popconfirm>\n                    )}\n                  </div>\n                  <Button type='default' onClick={() => history.push('/applications')}>Back</Button>\n                </div>\n              </div>\n            </div>\n            <div className='row'>\n              <div className='application-tag'>\n                <Tags />\n              </div>\n            </div>\n          </div>\n          <div className='card-body'>\n            <div className='application-header'>\n              <div className='search-bar'>\n                <div className='row'>\n                  <div className='col-md-3 col-xs-12'>\n                    {/* <Search placeholder='input application name or tags' onSearch={value => onSearch(value)}>Search</Search> */}\n                  </div>\n                </div>\n              </div>\n            </div>\n            <Tabs defaultActiveKey='1' size='large' onChange={onChange}>\n              <TabPane tab='Dashboard' key='1'>\n                {tab === '1' && <Dashboard />}\n              </TabPane>\n              <TabPane tab='Scenario' key='2'>\n                {tab === '2' && <Scenario />}\n              </TabPane>\n              <TabPane tab='User Log' key='3'>\n                {tab === '3' && <UserLog />}\n              </TabPane>\n              <TabPane tab='System Log' key='4'>\n                {tab === '4' && <SystemLog />}\n              </TabPane>\n            </Tabs>\n          </div>\n        </div>\n      </div>\n    </>\n  )\n}\n\nexport default withRouter(connect(mapStateToProps)(DefaultPage))\n"],"sourceRoot":""}